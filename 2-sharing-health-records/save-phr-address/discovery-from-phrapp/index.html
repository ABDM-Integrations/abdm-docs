<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.99.1"><meta name=description content="Documentation of various ABDM Building Blocks"><meta name=author content="NHA"><link rel=icon href=/abdm-docs/images/favicon.png type=image/png><title>Discovery from PHR Apps - ABDM Sandbox Documentation</title><link href=/abdm-docs/css/nucleus.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/fontawesome-all.min.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/hybrid.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/featherlight.min.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/perfect-scrollbar.min.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/auto-complete.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/atom-one-dark-reasonable.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/theme.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/tabs.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/hugo-theme.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/theme-blue.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/foo.css?1653462438 rel=stylesheet><link href=/abdm-docs/css/bar.css?1653462438 rel=stylesheet><script src=/abdm-docs/js/jquery-3.3.1.min.js?1653462438></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/abdm-docs/2-sharing-health-records/save-phr-address/discovery-from-phrapp/><nav id=sidebar><div id=header-wrapper><div id=header><img src=/abdm-docs/img/logo.png></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/abdm-docs/js/lunr.min.js?1653462438></script>
<script type=text/javascript src=/abdm-docs/js/auto-complete.js?1653462438></script>
<script type=text/javascript>var baseurl="http://kiranma72.github.io/abdm-docs"</script><script type=text/javascript src=/abdm-docs/js/search.js?1653462438></script></div><div class=highlightable><ul class=topics><li data-nav-id=/abdm-docs/1-basics/ title="Getting Started" class=dd-item><a href=/abdm-docs/1-basics/><b>1. </b>Getting Started</a><ul><li data-nav-id=/abdm-docs/1-basics/phr_architecture_overview/ title="Understanding the PHR Framework" class=dd-item><a href=/abdm-docs/1-basics/phr_architecture_overview/>Understanding the PHR Framework</a></li><li data-nav-id=/abdm-docs/1-basics/sandbox_signup_page/ title="Sign up to the ABDM Sandbox" class=dd-item><a href=/abdm-docs/1-basics/sandbox_signup_page/>Sign up to the ABDM Sandbox</a></li><li data-nav-id=/abdm-docs/1-basics/integrators_section/ title="Making your app ABDM compliant" class=dd-item><a href=/abdm-docs/1-basics/integrators_section/>Making your app ABDM compliant</a></li><li data-nav-id=/abdm-docs/1-basics/sandbox_request_status_page/ title="Verify you can access the Sandbox" class=dd-item><a href=/abdm-docs/1-basics/sandbox_request_status_page/>Verify you can access the Sandbox</a></li><li data-nav-id=/abdm-docs/1-basics/register_and_link_health_facility/ title="Link your Health Facility" class=dd-item><a href=/abdm-docs/1-basics/register_and_link_health_facility/>Link your Health Facility</a></li><li data-nav-id=/abdm-docs/1-basics/integrators_overview/ title="Making your App ABDM Compilant" class=dd-item><a href=/abdm-docs/1-basics/integrators_overview/>Making your App ABDM Compilant</a></li><li data-nav-id=/abdm-docs/1-basics/working_with_abdm_apis/ title="Working with ABDM APIs" class=dd-item><a href=/abdm-docs/1-basics/working_with_abdm_apis/>Working with ABDM APIs</a></li></ul></li><li data-nav-id=/abdm-docs/2-sharing-health-records/ title="Building a HRP" class="dd-item
parent"><a href=/abdm-docs/2-sharing-health-records/><b>2. </b>Building a HRP</a><ul><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/ title="Collect & Save PHR Address" class="dd-item
parent"><a href=/abdm-docs/2-sharing-health-records/save-phr-address/><b>2.1 </b>Collect & Save PHR Address</a><ul><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-hip-qr2/ title="By scanning HIP QR code" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-hip-qr2/>By scanning HIP QR code</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-phraddr-qr/ title="By scanning PHR Address QR" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/scanning-phraddr-qr/>By scanning PHR Address QR</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/shared-verbally/ title="By sharing PHR verbally" class=dd-item><a href=/abdm-docs/2-sharing-health-records/save-phr-address/shared-verbally/>By sharing PHR verbally</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/save-phr-address/discovery-from-phrapp/ title="Discovery from PHR Apps" class="dd-item active"><a href=/abdm-docs/2-sharing-health-records/save-phr-address/discovery-from-phrapp/>Discovery from PHR Apps</a></li></ul></li><li data-nav-id=/abdm-docs/2-sharing-health-records/notify-on-new-records/ title="Notify or Link new records" class=dd-item><a href=/abdm-docs/2-sharing-health-records/notify-on-new-records/><b>2.2 </b>Notify or Link new records</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/push-records/ title="Push the health data" class=dd-item><a href=/abdm-docs/2-sharing-health-records/push-records/><b>2.3 </b>Push the health data</a></li><li data-nav-id=/abdm-docs/2-sharing-health-records/using-fhir-for-data/ title="Using FHIR for data" class=dd-item><a href=/abdm-docs/2-sharing-health-records/using-fhir-for-data/><b>2.4 </b>Using FHIR for data</a></li></ul></li><li data-nav-id=/abdm-docs/3-get-health-records/ title="Building a HIU" class=dd-item><a href=/abdm-docs/3-get-health-records/><b>3. </b>Building a HIU</a></li><li data-nav-id=/abdm-docs/4-building-a-phr-app/ title="Building a PHR App" class=dd-item><a href=/abdm-docs/4-building-a-phr-app/><b>4. </b>Building a PHR App</a><ul><li data-nav-id=/abdm-docs/4-building-a-phr-app/signup-or-signin/ title="Sign Up or Sign in using PHR Addr" class=dd-item><a href=/abdm-docs/4-building-a-phr-app/signup-or-signin/>Sign Up or Sign in using PHR Addr</a></li></ul></li><li data-nav-id=/abdm-docs/5-exiting-sandbox/ title="Sandbox Exit Process" class=dd-item><a href=/abdm-docs/5-exiting-sandbox/><b>5. </b>Sandbox Exit Process</a></li><li data-nav-id=/abdm-docs/6-m1-apis/ title="ABHA Number" class=dd-item><a href=/abdm-docs/6-m1-apis/><b>6. </b>ABHA Number</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/ title="Registration for ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/><b>6.1 </b>Registration for ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-aadhaar/ title="ABHA ID Registration via Aadhaar" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-aadhaar/>ABHA ID Registration via Aadhaar</a></li><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-other-documents/ title="ABHA ID Registration via Other Documents" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/registration-via-other-documents/>ABHA ID Registration via Other Documents</a></li><li data-nav-id=/abdm-docs/6-m1-apis/abha-id-registration/link-delink-abha-addr/ title="Link/De-link of ABHA Address" class=dd-item><a href=/abdm-docs/6-m1-apis/abha-id-registration/link-delink-abha-addr/>Link/De-link of ABHA Address</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/ title="Login with ABHA (Health ID)" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/><b>6.2 </b>Login with ABHA (Health ID)</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-with-aadhaar-otp/ title="Login with Aadhaar OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-with-aadhaar-otp/>Login with Aadhaar OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-with-mobile-otp/ title="Login with Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-with-mobile-otp/>Login with Mobile OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/login-abha-id/login-using-mobile/ title="Login to your ABHA using Mobile" class=dd-item><a href=/abdm-docs/6-m1-apis/login-abha-id/login-using-mobile/>Login to your ABHA using Mobile</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/ title="Retrieve your ABHA account" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/><b>6.3 </b>Retrieve your ABHA account</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-aadhaar-otp/ title="Retrieve ABHA via Aadhaar OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-aadhaar-otp/>Retrieve ABHA via Aadhaar OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-mobile-otp/ title="Retrieve ABHA via Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/retrieve-abha-account/retrieve-abha-mobile-otp/>Retrieve ABHA via Mobile OTP</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/ title="User Profile" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/><b>6.4 </b>User Profile</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/get-profile/ title="Get User profile" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/get-profile/>Get User profile</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/get-qr-code/ title="Get User QR Code" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/get-qr-code/>Get User QR Code</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-email/ title="Update Email" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-email/>Update Email</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-aadhaar-otp/ title="Update Mobile via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-aadhaar-otp/>Update Mobile via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-mobile-otp/ title="Update Mobile via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/user-profile/update-mobile-via-mobile-otp/>Update Mobile via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/ title="Delete ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/><b>6.5 </b>Delete ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/delete-via-aadhaar-otp/ title="Delete via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/delete-via-aadhaar-otp/>Delete via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/delete-abha/delete-via-mobile-otp/ title="Delete via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/delete-abha/delete-via-mobile-otp/>Delete via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/ title="Deactivate ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/><b>6.6 </b>Deactivate ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-aadhaar-otp/ title="Deactivate via Aadhaar Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-aadhaar-otp/>Deactivate via Aadhaar Otp</a></li><li data-nav-id=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-mobile-otp/ title="Deactivate via Mobile Otp" class=dd-item><a href=/abdm-docs/6-m1-apis/deactivate-abha/deactivate-via-mobile-otp/>Deactivate via Mobile Otp</a></li></ul></li><li data-nav-id=/abdm-docs/6-m1-apis/reactivate-abha/ title="Reactivate ABHA" class=dd-item><a href=/abdm-docs/6-m1-apis/reactivate-abha/><b>6.7 </b>Reactivate ABHA</a><ul><li data-nav-id=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-via-aadhaar-otp/ title="Reactivate via Aadhaar OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-via-aadhaar-otp/>Reactivate via Aadhaar OTP</a></li><li data-nav-id=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-via-mobile-otp/ title="Reactivate via Mobile OTP" class=dd-item><a href=/abdm-docs/6-m1-apis/reactivate-abha/reactivate-via-mobile-otp/>Reactivate via Mobile OTP</a></li></ul></li></ul></li><li data-nav-id=/abdm-docs/uhi/ title="Building UHI Apps" class=dd-item><a href=/abdm-docs/uhi/><b>7. </b>Building UHI Apps</a><ul><li data-nav-id=/abdm-docs/uhi/about_uhi/ title="What is UHI & the DHP Protocol" class=dd-item><a href=/abdm-docs/uhi/about_uhi/>What is UHI & the DHP Protocol</a></li><li data-nav-id=/abdm-docs/uhi/uhi_services/ title="Health services on UHI" class=dd-item><a href=/abdm-docs/uhi/uhi_services/>Health services on UHI</a></li><li data-nav-id=/abdm-docs/uhi/uhi_sandbox_gw/ title="The UHI Gateway, EUA & HSPA" class=dd-item><a href=/abdm-docs/uhi/uhi_sandbox_gw/>The UHI Gateway, EUA & HSPA</a></li><li data-nav-id=/abdm-docs/uhi/uhi_sandbox_registry/ title="Registrating your UHI app" class=dd-item><a href=/abdm-docs/uhi/uhi_sandbox_registry/>Registrating your UHI app</a></li><li data-nav-id=/abdm-docs/uhi/building-uhi-eua/ title="Building UHI EUA App" class=dd-item><a href=/abdm-docs/uhi/building-uhi-eua/><b>7.1 </b>Building UHI EUA App</a><ul><li data-nav-id=/abdm-docs/uhi/building-uhi-eua/sign_up_with_phr/ title="Sign In/Up with PHR Addr" class=dd-item><a href=/abdm-docs/uhi/building-uhi-eua/sign_up_with_phr/>Sign In/Up with PHR Addr</a></li><li data-nav-id=/abdm-docs/uhi/building-uhi-eua/teleconsultation/ title="Sign In/Up with PHR Addr" class=dd-item><a href=/abdm-docs/uhi/building-uhi-eua/teleconsultation/>Sign In/Up with PHR Addr</a></li><li data-nav-id=/abdm-docs/uhi/building-uhi-eua/teleconsults/ title=Teleconsultations class=dd-item><a href=/abdm-docs/uhi/building-uhi-eua/teleconsults/><b>7.1.1 </b>Teleconsultations</a></li></ul></li><li data-nav-id=/abdm-docs/uhi/building-uhi-hspa/ title="Building UHI HSPA App" class=dd-item><a href=/abdm-docs/uhi/building-uhi-hspa/><b>7.2 </b>Building UHI HSPA App</a></li></ul></li></ul><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/abdm-docs/>ABDM Sandbox Home</a> > <a href=/abdm-docs/2-sharing-health-records/>Building a HRP</a> > <a href=/abdm-docs/2-sharing-health-records/save-phr-address/>Collect & Save PHR Address</a> > Discovery from PHR Apps</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#discovery-from-phr-apps--overview-of-the-functionality>Discovery from PHR Apps : Overview of the functionality</a></li><li><a href=#discovery-of-patients-information-at-the-hip>Discovery of Patient’s information at the HIP</a></li><li><a href=#verify-the-patient-and-link-the-care-context-as-requested-by-the-patient>Verify the patient and link the care context as requested by the patient</a><ul><li><a href=#1-discovery-request>1. Discovery Request</a></li><li><a href=#2-on-discovery>2. On-Discovery</a></li><li><a href=#3-link-patients-care-contexts>3. Link Patient&rsquo;s Care Contexts</a></li><li><a href=#4-response-to-patients-care-context-link-request>4. Response to patient&rsquo;s care context link request</a></li><li><a href=#5-token-submission-by-consent-manager-for-link-confirmation>5. Token Submission by consent manager for link confirmation</a></li><li><a href=#6-token-authenticated-by-hip-indicating-completion-of-linkage-of-care-contexts>6. Token authenticated by HIP, indicating completion of linkage of care-contexts</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Discovery from PHR Apps</h1><h2 id=discovery-from-phr-apps--overview-of-the-functionality>Discovery from PHR Apps : Overview of the functionality</h2><ul><li>Patient must have a PHR app and have a valid PHR address</li><li>Patient LogIn to PHR app with Mobile/PHR Address/e-Mail/ABHA etc</li><li>Patient makes a discovery request with verified identifiers along with name and demographic information</li><li>HIP revert with the Care Context detail</li></ul><p></p><h2 id=discovery-of-patients-information-at-the-hip>Discovery of Patient’s information at the HIP</h2><p>When the gateway calls an HIP system and requests for a particular patient’s records with a set of verifiable Ids, the process of information discovery begins. Upon receipt of the request, the HIP health repository reverts with a set of care context labels (in masked form).</p><h2 id=verify-the-patient-and-link-the-care-context-as-requested-by-the-patient>Verify the patient and link the care context as requested by the patient</h2><p>This flow begins once a patient initiates a link request to the HIP to link the care context to the patient’s Consent Manager’s User ID. To enable the linking, the HIP system returns a link reference number along with the authentication type and its associated parameters.</p><p>The HIP system sends an OTP to the patient’s phone number. Note, the phone number for OTP communication from HIP may be the same as verified by the CM or maybe a different number that the patient has chosen as preferred mode of communication with HIP - meaning it&rsquo;s up to the HIP to choose the phone number it sends OTP to. The patient, via patient app, submits the OTP received from the HIP system within the stipulated time. If the patient is successfully authenticated by the HIP, the linking is now complete. The following flow diagrams details the flows that take place while linking to a health repository representing an HIP.</p><p>**Note : Post successful completion of discovery flow, its HIP’s prerogative to decide regarding implementation logic for saving the Verified identifier information (ABHA Address and ABHA number in case of KYC verified linking.</p><p>The following API sequence diagram details the flows that take place during patient information discovery from the HIP perspective
<img src=https://user-images.githubusercontent.com/104073067/169794446-b42f13d5-3f35-4bb6-a558-59864fb3d2dd.jpg alt=API_discovery></p><h3 id=1-discovery-request>1. Discovery Request</h3><p>( Swagger link of Discovery API - <a href=https://sandbox.abdm.gov.in/swagger/ndhm-hip.yaml>https://sandbox.abdm.gov.in/swagger/ndhm-hip.yaml</a> )
( Base URL: <a href=https://dev.abdm.gov.in/gateway>https://dev.abdm.gov.in/gateway</a> )</p><p>Request for patient care context discover, made by Gateway intended for a specific HIP. It is expected that HIP will subsequently return either zero or one patient record with (potentially masked) associated care contexts</p><ul><li>At least one of the verified identifier matches</li><li>Name (fuzzy), gender matches</li><li>If YoB was given, age band(+-2) matches</li><li>If unverified identifiers were given, one of them matches</li><li>If more than one patient records would be found after aforementioned steps, then patient who matches most verified and unverified identifiers would be returned.</li><li>If there would be still more than one patients (after ranking) error would be returned</li><li>Intended HIP should be able to resolve and identify results returned in the subsequent link confirmation request via the specified transactionId</li><li>Intended HIP should store the discovery results with transactionId and care contexts discovered for subsequent link initiation</li></ul><p>**URL: /v0.5/care-contexts/discover **
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge</li><li>X-HIP-ID: Identifier of the health information provider to which the request was intended.
<strong>Request Body:</strong>
<strong>Example:</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;499a5a4a-7dda-4f20-9b67-e24589627061&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T10:30:58.871Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;patient&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;&lt;patient-id&gt;@&lt;consent-manager-id&gt;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;verifiedIdentifiers&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;MR&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;+919800083232&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;unverifiedIdentifiers&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;MR&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;value&#34;</span>: <span style=color:#e6db74>&#34;+919800083232&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;chandler bing&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;gender&#34;</span>: <span style=color:#e6db74>&#34;M&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;yearOfBirth&#34;</span>: <span style=color:#ae81ff>2000</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Request Accepted</p><h3 id=2-on-discovery>2. On-Discovery</h3><p>Result of patient care-context discovery request at HIP end. If a matching patient found with zero or more care contexts associated, it is specified as result attribute. If the prior discovery request, resulted in errors then it is specified in the error attribute. Reasons of errors can be</p><ul><li>more than one definitive match for the given request</li><li>no verified identifer was specified</li></ul><p>**URL: POST /v0.5/care-contexts/on-discover **
<strong>Request:</strong><br><strong>HEADERS:</strong></p><ul><li>Authorization: Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge.</li><li>X-CM-ID: Suffix of the consent manager to which the request was intended.(Should be the domain in the PHR Address - @sbx or @abdm)
<strong>Request Body:</strong></li></ul><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;5f7a535d-a3fd-416b-b069-c97d021fbacd&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T10:38:59.874Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;patient&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;display&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;careContexts&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;display&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;matchedBy&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;MR&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Request Accepted</p><h3 id=3-link-patients-care-contexts>3. Link Patient&rsquo;s Care Contexts</h3><p>Request from Gateway to links care contexts associated with only one patient</p><ul><li>Validate account reference number and care context reference number</li><li>Validate transactionId in the request with discovery request entry to check whether there was a discovery and were these care contexts discovered or not for a given patient</li><li>Before eventual link confirmation, HIP needs to authenticate the request with the patient(eg: OTP verification)</li><li>HIP should communicate the mode of authentication of a successful request to Consent Manager
<strong>URL: /v0.5/links/link/init</strong>
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></li><li>Authorization: JWT Sessions token (Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge.)</li><li>X-HIP-ID: Identifier of the health information provider to which the request was intended.
<strong>Request Body:</strong></li></ul><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T10:50:35.447Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;patient&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;hinapatel79@ndhm&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;TMH-PUID-001&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;careContexts&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><h3 id=4-response-to-patients-care-context-link-request>4. Response to patient&rsquo;s care context link request</h3><p>Result of patient care-context link request from HIP end. This happens in context of previous discovery of patient found at HIP end, therefore the link requests ought to be in reference to the patient reference and care-context references previously returned by the HIP. The correlation of discovery and link request is maintained through the transactionId. HIP should have</p><ul><li>Validated transactionId in the request to check whether there was a discovery done previously, and the link request corresponds to returned patient care care context references</li><li>Before returning the response, HIP should have sent an authentication request to the patient(eg: OTP verification)</li><li>HIP should communicate the mode of authentication of a successful request</li><li>HIP subsequently should expect the token passed via /link/confirm against the link.referenceNumber passed in this call</li></ul><p>**URL: /v0.5/links/link/on-init **
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge</li><li>X-HIP-ID: Identifier of the health information provider to which the request was intended.
<strong>Request Body:</strong></li></ul><p><strong>Example</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;5f7a535d-a3fd-416b-b069-c97d021fbacd&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T10:54:45.431Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;transactionId&#34;</span>: <span style=color:#e6db74>&#34;a1s2c932-2f70-3ds3-a3b5-2sfd46b12a18d&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;link&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;authenticationType&#34;</span>: <span style=color:#e6db74>&#34;DIRECT&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;meta&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;communicationMedium&#34;</span>: <span style=color:#e6db74>&#34;MOBILE&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;communicationHint&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;communicationExpiry&#34;</span>: <span style=color:#e6db74>&#34;2019-12-30T12:01:55Z&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong>
202 Accepted</p><h3 id=5-token-submission-by-consent-manager-for-link-confirmation>5. Token Submission by consent manager for link confirmation</h3><p>API to submit the token that was sent by HIP during the link request.
**URL: /v0.5/links/link/confirm **
<strong>Request:</strong> POST<br><strong>HEADERS:</strong></p><ul><li>Authorization: Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge. (JWT Token)</li><li>X-HP-ID:Identifier of the health information provider to which the request was intended.</li></ul><p><strong>Request Body:</strong>
<strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T11:20:44.122Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;confirmation&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;linkRefNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;token&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><h3 id=6-token-authenticated-by-hip-indicating-completion-of-linkage-of-care-contexts>6. Token authenticated by HIP, indicating completion of linkage of care-contexts</h3><p>Returns a list of linked care contexts with patient reference number.</p><ul><li>Validated and linked account reference number</li><li>Validated that the token sent from Consent Manager is same as the one generated by HIP</li><li>Verified that same Consent Manager which made the link request is sending the token</li><li>Results of unmasked linked care contexts with patient reference number</li></ul><p><strong>URL: /v0.5/links/link/on-confirm</strong>
<strong>Request:</strong> POST<br><strong>Parameters:</strong></p><ul><li>Authorization: Access token which was issued after successful login with gateway auth server, which will be sent by gateway to authenticate itself with API bridge.</li><li>X-CM-ID: Suffix of the consent manager to which the request was intended.(Should be the domain in the PHR Address - @sbx or @abdm)</li></ul><p><strong>Request Body:</strong></p><p><strong>Example:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;5f7a535d-a3fd-416b-b069-c97d021fbacd&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timestamp&#34;</span>: <span style=color:#e6db74>&#34;2022-05-23T11:22:33.380Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;patient&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;display&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;careContexts&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;referenceNumber&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;display&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;code&#34;</span>: <span style=color:#ae81ff>1000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;resp&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requestId&#34;</span>: <span style=color:#e6db74>&#34;3fa85f64-5717-4562-b3fc-2c963f66afa6&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Response:</strong></p><p>202 Accepted</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/abdm-docs/js/clipboard.min.js?1653462438></script>
<script src=/abdm-docs/js/perfect-scrollbar.min.js?1653462438></script>
<script src=/abdm-docs/js/perfect-scrollbar.jquery.min.js?1653462438></script>
<script src=/abdm-docs/js/jquery.sticky.js?1653462438></script>
<script src=/abdm-docs/js/featherlight.min.js?1653462438></script>
<script src=/abdm-docs/js/highlight.pack.js?1653462438></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/abdm-docs/js/modernizr.custom-3.6.0.js?1653462438></script>
<script src=/abdm-docs/js/learn.js?1653462438></script>
<script src=/abdm-docs/js/hugo-learn.js?1653462438></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>